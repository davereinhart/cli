[pytest]
addopts = --flake8 --doctest-modules
testpaths = nextstrain tests
python_files = *.py

# Avoid catching test_setup() functions.  I've always disliked the name-based
# test discovery anyway.
python_functions = pytest_*

# Turn warnings into errors.  Warnings are signs that something needs
# attention, even if that means choosing to add an explicit ignore filter rule
# for them.  Last matching filter wins.
filterwarnings =
    error
    ignore:SelectableGroups dict interface:DeprecationWarning:flake8
    ignore:<class 'pytest_flake8[.]Flake8Item'> is not using a cooperative constructor:pytest.PytestDeprecationWarning
    ignore:The .+? argument to Flake8Item is deprecated:pytest.PytestDeprecationWarning
    ignore:Flake8Item is an Item subclass and should not be a collector:pytest.PytestWarning
